ALTER
 ALGORITHM = UNDEFINED
DEFINER=`root`@`localhost`
 SQL SECURITY DEFINER
 VIEW `assistanceAnually`
 AS select `adminlte`.`assistance_regime`.`assistance_id` AS `id`,`adminlte`.`assistance_regime`.`name` AS `name`,sum((((`routerji`.`stevilo` + `pregrade`.`stevilo`) + `stikala`.`stevilo`) + `tocke`.`stevilo`)) AS `numOfDevices`,`adminlte`.`assistance_regime`.`price` AS `pricePerDevice`,sum((`routerji`.`stevilo` * `adminlte`.`assistance_regime`.`price`)) AS `routersYearlyPrice`,sum((`stikala`.`stevilo` * `adminlte`.`assistance_regime`.`price`)) AS `switchesYearlyPrice`,sum((`pregrade`.`stevilo` * `adminlte`.`assistance_regime`.`price`)) AS `firewallsYearlyPrice`,sum((`tocke`.`stevilo` * `adminlte`.`assistance_regime`.`price`)) AS `apsYearlyPrice`,(((sum((`routerji`.`stevilo` * `adminlte`.`assistance_regime`.`price`)) + sum((`stikala`.`stevilo` * `adminlte`.`assistance_regime`.`price`))) + sum((`pregrade`.`stevilo` * `adminlte`.`assistance_regime`.`price`))) + sum((`tocke`.`stevilo` * `adminlte`.`assistance_regime`.`price`))) AS `total` from ((((`adminlte`.`assistance_regime` join (select `adminlte`.`routers`.`assistance_id` AS `assistance_id`,count(`adminlte`.`routers`.`assistance_id`) AS `stevilo` from `adminlte`.`routers` group by `adminlte`.`routers`.`assistance_id`) `routerji` on((`adminlte`.`assistance_regime`.`assistance_id` = `routerji`.`assistance_id`))) join (select `adminlte`.`switches`.`assistance_id` AS `assistance_id`,count(`adminlte`.`switches`.`assistance_id`) AS `stevilo` from `adminlte`.`switches` group by `adminlte`.`switches`.`assistance_id`) `stikala` on((`adminlte`.`assistance_regime`.`assistance_id` = `stikala`.`assistance_id`))) join (select `adminlte`.`firewalls`.`assistance_id` AS `assistance_id`,count(`adminlte`.`firewalls`.`assistance_id`) AS `stevilo` from `adminlte`.`firewalls` group by `adminlte`.`firewalls`.`assistance_id`) `pregrade` on((`adminlte`.`assistance_regime`.`assistance_id` = `pregrade`.`assistance_id`))) join (select `adminlte`.`accesspoints`.`assistance_id` AS `assistance_id`,count(`adminlte`.`accesspoints`.`assistance_id`) AS `stevilo` from `adminlte`.`accesspoints` group by `adminlte`.`accesspoints`.`assistance_id`) `tocke` on((`adminlte`.`assistance_regime`.`assistance_id` = `tocke`.`assistance_id`))) group by `adminlte`.`assistance_regime`.`assistance_id`
